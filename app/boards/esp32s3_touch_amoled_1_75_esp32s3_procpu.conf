# CONFIG_BOOTLOADER_MCUBOOT=y

# Debug
CONFIG_DEBUG=y
CONFIG_NO_OPTIMIZATIONS=y
CONFIG_DEBUG_OPTIMIZATIONS=y
CONFIG_DEBUG_THREAD_INFO=y
# CONFIG_XTENSA_ENABLE_BACKTRACE=y
# CONFIG_XTENSA_EXCEPTION_ENTER_GDB=y
# CONFIG_XTENSA_BREAK_ON_UNRECOVERABLE_EXCEPTIONS=y

# PSRAM config for ESP32-S3-N16R8 board with 8MB Octal SPI SPRAM
CONFIG_ESP_SPIRAM=y
CONFIG_SPIRAM_MODE_OCT=y
# SPIRAM (PSRAM) and SPI Flash are on the same bus,
# when SPIRAM is operating in Octal mode at 80MHz, due to the bug:
# https://github.com/zephyrproject-rtos/zephyr/issues/87938
# SPI Flash fails to initialize
CONFIG_SPIRAM_SPEED_40M=y
# 8MB
CONFIG_ESP_SPIRAM_SIZE=8388608
# 4MB
CONFIG_ESP_SPIRAM_HEAP_SIZE=4194304

# Not working on stable version v4.1 due to the bug:
# https://github.com/zephyrproject-rtos/zephyr/pull/88073
# But works on main branch with patch.
CONFIG_SPIRAM_RODATA=y
CONFIG_SPIRAM_FETCH_INSTRUCTIONS=y

# LVGL Memory

CONFIG_LV_Z_VDB_CUSTOM_SECTION=y
# CONFIG_LV_DRAW_THREAD_STACK_SIZE=32768
# CONFIG_LV_DRAW_LAYER_SIMPLE_BUF_SIZE=32768

CONFIG_LV_Z_MEMORY_POOL_CUSTOM_SECTION=y
# CONFIG_LV_Z_MEM_POOL_SYS_HEAP=y
# CONFIG_LV_Z_MEM_POOL_SIZE=32768
# LVGL Transform requires a lot of memory
CONFIG_LV_Z_MEM_POOL_SIZE=1048576

CONFIG_DISPLAY=y
CONFIG_DISPLAY_LOG_LEVEL_DBG=y

CONFIG_MSPI=y
CONFIG_MSPI_ESP32=y
# CONFIG_MSPI_LOG_LEVEL_DBG=y

# TODO: NXP Added their own driver for the CO5300 display
# Review if it makes sense to move to NXP driver
CONFIG_ELCO5300=y

CONFIG_INPUT_CST92XX=y
# CONFIG_INPUT_CST92XX_EV_DEVICE=y
CONFIG_INPUT_CST92XX_INTERRUPT=y
CONFIG_INPUT_QUEUE_MAX_MSGS=40
# CONFIG_INPUT_LOG_LEVEL_DBG=y

# CANBus
# CONFIG_CAN_MAX_FILTER=8
CONFIG_CAN_MCP251XFD_INT_THREAD_STACK_SIZE=4096
